{% extends 'base.html' %}

{% block content %}
    {% if failed_captcha %}
        <strong class="error" id="failed-captcha-msg">You must be a robot. Try again when you pass the Turing Test. </strong>
    {%  end  %}
    <div class="row">
        <form method="post" action="{{ request.path }}" class="col s12">
            {% raw xsrf_form_html() %}

            {% for field in form %}
                {% set c = '' %}
                <div class="row">
                    {% if field.type not in ('BooleanField') %}
                        {% set c = c + ' input-field' %}
                    {% end %}

                    <div class="{{ c }} col s12">
                        {% raw field %}
                        <label {% if field.errors %}data-error="{% raw field.errors[0] %}"{% end %}
                               for="{{ field.name }}">{% raw field.label %}</label>
                    </div>
                </div>
            {% end %}

            <div class="row">
                <div class="col s12">
                    <div id="captcha"></div>

                    <!-- hidden submit button -->
                    <input style="display: none" id="submit" type="submit">
                </div>
            </div>
        </form>
    </div>
{% end %}

{% block scripts %}
    <script src="{{ static_url('js/captcha-handler.js') }}"></script>
    <!-- recaptcha import -->
    <script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
{% end %}